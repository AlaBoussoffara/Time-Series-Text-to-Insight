Question,Benchmark SQL,Generated SQL,Supervisor Answer
Lister toutes les configs actives avec le nom du gateway et le fichier associé.,"SELECT c.config_id, g.name AS gateway_name, c.file_name FROM public.configs c LEFT JOIN public.gateways g ON g.gateway_id = c.gateway_id WHERE c.active IS TRUE ORDER BY gateway_name, c.file_name;","SELECT config_id, gateway_id, file_name, active FROM configs LIMIT 5;; SELECT gateway_id, name FROM gateways LIMIT 5;","Source: SQL Agent
Retrieved active gateway configurations showing:
- 24 active configuration records total
- Multiple gateways have multiple active configs:
  * MAT_CVG_PM has 3 active configs
  * MAT_INCLINO_3 and MAT_INCLINO_4 each have 2 active configs
Data stored under 'active_gateway_configs' with gateway_name, config_id, and file_name columns."
"Pour un fichier de mesures donné ( Surface_MAT_STA2.dat), récupérer les informations de connexion FTP (IP, user, répertoire).","SELECT c.config_id, c.gateway_id, c.ftp, c.ftp_ip, c.ftp_user, c.ftp_directory FROM public.configs c WHERE c.file_name = 'Surface_MAT_STA2.dat';","SELECT c.file_name, c.ftp_ip, c.ftp_user, c.ftp_directory, g.name as gateway_name 
FROM configs c 
JOIN gateways g ON c.gateway_id = g.gateway_id 
LIMIT 5;","Source: SQL Agent
Les détails de connexion FTP pour le fichier Surface_MAT_STA2.dat sont :
- Adresse IP : 54.75.136.219
- Nom d'utilisateur : CEM001FTP
- Répertoire : /DonneesExternes/M3_GC03_TISSEO/STA/MAT/STA2/FichiersMesures/VDV/

Les informations ont été récupérées avec succès en joignant les tables configs et gateways."
"Obtenir, pour chaque gateway, la dernière date de traitement de config .","SELECT c.gateway_id, g.name AS gateway_name, MAX(c.last_treatment::timestamptz) AS last_treatment_ts FROM public.configs c LEFT JOIN public.gateways g ON g.gateway_id = c.gateway_id GROUP BY c.gateway_id, g.name ORDER BY last_treatment_ts DESC;","SELECT gateway_id, name FROM gateways LIMIT 5;; SELECT config_id, gateway_id, last_modified, last_treatment FROM configs LIMIT 5;","Source: SQL Agent
Retrieved latest config processing dates for all gateways by joining gateways and configs tables on gateway_id. Found 19 gateways with config dates ranging from 2023-10-25 to 2025-10-14. Most recently updated gateways were MAT_TLMetropole_VIB0015 and MAT_LA_STA1. Results stored in gateway_latest_configs dataset."
Identifier les configs qui n'ont jamais été traitées ou dont le dernier traitement remonte à plus de 24h.,"SELECT c.config_id, g.name AS gateway_name, c.file_name, c.last_treatment FROM public.configs c LEFT JOIN public.gateways g ON g.gateway_id = c.gateway_id WHERE c.last_treatment IS NULL OR c.last_treatment::timestamptz < NOW() - INTERVAL '24 hours' ORDER BY c.last_treatment NULLS FIRST;","SELECT config_id, file_name, last_treatment FROM configs LIMIT 5;; SELECT 
    config_id,
    file_name,
    last_treatment as last_processed_at
FROM configs 
WHERE last_treatment IS NULL 
    OR last_treatment < NOW() - INTERVAL '24 hours'
ORDER BY last_treatment ASC NULLS FIRST;","Source: SQL Agent
Found 26 configurations requiring processing attention, saved under 'stale_configs'. These include configurations that have never been processed (NULL last_treatment) as well as those not processed in the last 24 hours, with processing dates ranging from 2023-10-25 to 2025-10-14."
Compter le nombre de variables déclarées dans le payload de chaque config_id.,"SELECT c.config_id, g.name AS gateway_name, jsonb_array_length(COALESCE(NULLIF(c.payload,'null'), '[]')::jsonb) AS payload_variable_count FROM public.configs c LEFT JOIN public.gateways g ON g.gateway_id = c.gateway_id ORDER BY payload_variable_count DESC, c.config_id;",SELECT * FROM configs LIMIT 5;,"Source: SQL Agent
Retrieved all distinct config_id and payload pairs from the configs table, ordered by config_id. The query returned 26 unique combinations and stored them under reference key ""config_payloads"".

Source: Analysis Agent
Analysis reveals varying complexity across 26 configurations:
- Minimal complexity (1 variable each): configs 5769, 5842, 6317 (monitoring LAeq over 900 seconds)
- Medium complexity: CVG measurements (configs 10595, 10596, 10692) with 10 variables each
- Consistent complexity: Inclinometer configs (10440-10449) with 51 measurement points each
- Highest complexity: TISSEO_LA_STA1 system (config 9528) with over 900 variables

Most configurations include relative measurements (Xrelatif, Yrelatif, Zrelatif) for spatial monitoring."
Identifier les configs actives dont le payload est vide ou null (configs actives mais sans variables).,"SELECT c.config_id, g.name AS gateway_name, c.file_name FROM public.configs c LEFT JOIN public.gateways g ON g.gateway_id = c.gateway_id WHERE c.active IS TRUE AND jsonb_array_length(COALESCE(NULLIF(c.payload,'null'), '[]')::jsonb) = 0;","SELECT c.config_id, c.file_name, c.payload, c.active, g.gateway_id, s.site_id, p.project_id, p.name as project_name
FROM configs c
LEFT JOIN gateways g ON c.gateway_id = g.gateway_id 
LEFT JOIN site_gateways sg ON g.gateway_id = sg.gateway_id
LEFT JOIN sites s ON sg.site_id = s.site_id
LEFT JOIN projects p ON s.project_id = p.project_id
LIMIT 5;","Source: SQL Agent
Query found no active configs with empty or null payloads. The search covered config_id, file_name, project_name and active status columns across the configs, gateways, site_gateways, sites, and projects tables. All active configurations contain payload data."
Lister les configs explicitement inactives avec leur date de dernière mise à jour.,"SELECT c.config_id, g.name AS gateway_name, c.file_name, c.updated_at FROM public.configs c LEFT JOIN public.gateways g ON g.gateway_id = c.gateway_id WHERE c.active IS FALSE ORDER BY c.updated_at DESC NULLS LAST;","SELECT config_id, file_name, active, updated_at FROM configs LIMIT 5;","Source: SQL Agent
Found 2 inactive configurations in the system:
1. config_id: 10445, file_name: 'MAT_INF4_B24.dat', last updated: '2024-10-01 05:38:10.584 +0200'
2. config_id: 7258, file_name: 'Mesures_MAT2SON0002.rev00.dat', last updated: '2023-09-13 15:10:55.014 +0200'

Note: Only 2 configurations are explicitly marked as inactive (active = FALSE) in the system."
Lister les gateways qui n'ont aucune config associée (gateways déclarés mais non configurés).,"SELECT g.gateway_id, g.name FROM public.gateways g WHERE NOT EXISTS (SELECT 1 FROM public.configs c WHERE c.gateway_id = g.gateway_id) ORDER BY g.gateway_id;","SELECT gateway_id, name, serial_number FROM gateways LIMIT 5;; SELECT config_id, gateway_id, active FROM configs LIMIT 5;","Source: SQL Agent
Le système ne contient aucune gateway sans configuration - tous les gateways ont au moins une configuration associée. Cette vérification a été effectuée en joignant les tables gateways et configs, et aucune gateway sans entrée de configuration n'a été trouvée."
Compter le nombre de configs par adresse FTP (ftp_ip) pour évaluer la charge par endpoint.,"SELECT c.ftp_ip, COUNT(*) AS config_count FROM public.configs c GROUP BY c.ftp_ip ORDER BY config_count DESC, c.ftp_ip;","SELECT config_id, ftp_ip FROM configs LIMIT 5;","Source: SQL Agent
The query identified that all 26 configurations in the system are associated with a single FTP endpoint (IP: 54.75.136.219). The results have been saved under config_counts_by_ftp_ip."
Détecter les variable_id dupliquées dans le payload pour un même gateway (incohérences de mapping).,"WITH payload_vars AS (SELECT c.gateway_id, g.name AS gateway_name, c.config_id, (elem->>'variable_id')::bigint AS variable_id FROM public.configs c LEFT JOIN public.gateways g ON g.gateway_id = c.gateway_id CROSS JOIN LATERAL jsonb_array_elements(COALESCE(NULLIF(c.payload,'null'), '[]')::jsonb) AS elem) SELECT gateway_id, gateway_name, variable_id, COUNT(*) AS occurrences FROM payload_vars GROUP BY gateway_id, gateway_name, variable_id HAVING COUNT(*) > 1 ORDER BY occurrences DESC, gateway_id;","SELECT gateway_id, payload, config_id FROM configs LIMIT 5;; WITH extracted_vars AS (
  SELECT 
    gateway_id,
    json_array_elements(payload::json)->>'variable_id' AS variable_id
  FROM configs
  WHERE active = true
  AND payload IS NOT NULL
  AND payload != '[]'
),
duplicates AS (
  SELECT 
    gateway_id,
    variable_id,
    COUNT(*) as count
  FROM extracted_vars
  GROUP BY gateway_id, variable_id
  HAVING COUNT(*) > 1
)
SELECT 
  d.gateway_id,
  d.variable_id,
  d.count as occurrences,
  g.name as gateway_name
FROM duplicates d
JOIN gateways g ON d.gateway_id = g.gateway_id
ORDER BY d.count DESC, d.gateway_id;; WITH extracted_vars AS (
  SELECT 
    gateway_id,
    active,
    json_array_elements(payload::json)->>'variable_id' AS variable_id
  FROM configs
  WHERE payload IS NOT NULL
  AND payload != '[]'
),
duplicates AS (
  SELECT 
    gateway_id,
    variable_id,
    COUNT(*) as count,
    bool_or(active) as has_active,
    bool_or(NOT active) as has_inactive
  FROM extracted_vars
  GROUP BY gateway_id, variable_id
  HAVING COUNT(*) > 1
)
SELECT 
  d.gateway_id,
  d.variable_id,
  d.count as occurrences,
  g.name as gateway_name,
  CASE 
    WHEN d.has_active AND d.has_inactive THEN 'Mixte'
    WHEN d.has_active THEN 'Actif'
    ELSE 'Inactif'
  END as status
FROM duplicates d
JOIN gateways g ON d.gateway_id = g.gateway_id
ORDER BY d.count DESC, d.gateway_id;","Source: SQL Agent
L'analyse des configurations n'a révélé aucun variable_id dupliqué pour un même gateway. Cette vérification a été effectuée sur :
1. Les configurations actives uniquement
2. Toutes les configurations (actives et inactives)
Dans les deux cas, aucun doublon n'a été trouvé, ce qui indique que les configurations sont cohérentes du point de vue des identifiants de variables."
"Pour chaque gateway, récupérer la config la plus récente selon le champ last_modified.","SELECT DISTINCT ON (c.gateway_id) c.gateway_id, g.name AS gateway_name, c.config_id, c.file_name, c.last_modified::timestamptz AS last_modified_ts FROM public.configs c LEFT JOIN public.gateways g ON g.gateway_id = c.gateway_id ORDER BY c.gateway_id, c.last_modified::timestamptz DESC;","SELECT g.name AS gateway_name, c.config_id, c.file_name, c.last_modified 
FROM configs c
JOIN gateways g ON c.gateway_id = g.gateway_id
LIMIT 5;","Source: SQL Agent
Retrieved and persisted the most recent configuration for each gateway (19 total configurations) with the following details:
- Retrieved columns: gateway_name, config_id, file_name, and last_modified
- Results ordered by gateway_name 
- Date range spans from 2023-10-25 to 2025-10-14
- Successfully returned configurations for 19 distinct gateways
- Data stored under 'latest_gateway_configs'"
Afficher la cartographie projet -> site -> gateway (vision globale des installations).,"SELECT p.project_id, p.name AS project_name, s.site_id, s.name AS site_name, g.gateway_id, g.name AS gateway_name FROM public.projects p JOIN public.sites s ON s.project_id = p.project_id LEFT JOIN public.site_gateways sg ON sg.site_id = s.site_id LEFT JOIN public.gateways g ON g.gateway_id = sg.gateway_id ORDER BY project_name, site_name, gateway_name;",ERROR,"Recursion limit of 25 reached without hitting a stop condition. You can increase the limit by setting the `recursion_limit` config key.
For troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/GRAPH_RECURSION_LIMIT"
Lister les gateways installés sur le site MAT.,"SELECT s.name AS site_name, g.gateway_id, g.name AS gateway_name FROM public.sites s JOIN public.site_gateways sg ON sg.site_id = s.site_id JOIN public.gateways g ON g.gateway_id = sg.gateway_id WHERE s.name = 'MAT' ORDER BY gateway_name;","SELECT site_id, name FROM sites WHERE name LIKE 'MAT%' LIMIT 5;; SELECT * FROM site_gateways LIMIT 5;","Source: SQL Agent
Retrieved 11 gateways installed at MAT site (site_id 1055), ordered by gateway name: MAT_CVG_PM, MAT_INCLINO, MAT_INCLINO_2, MAT_INCLINO_3, MAT_INCLINO_4, MAT_LA_STA1, MAT_LA_STA1_Custom, MAT_STA1, MAT_STA2, MAT-M_TOPO, and MAT2_SONO0002."
Identifier les sites qui n'ont aucun gateway associé (sites non instrumentés).,"SELECT s.site_id, s.name AS site_name, p.name AS project_name FROM public.sites s LEFT JOIN public.projects p ON p.project_id = s.project_id WHERE NOT EXISTS (SELECT 1 FROM public.site_gateways sg WHERE sg.site_id = s.site_id) ORDER BY s.site_id;","SELECT site_id, name FROM sites LIMIT 5;","Source: SQL Agent
J'ai identifié 6 sites qui n'ont pas de gateway associé:
- MAT_Avoisinants (site_id: 1085)
- MAT_Topo (site_id: 1086) 
- MAT_Corps station_CVG (site_id: 2361)
- MAT_Corps station_EXT (site_id: 2362)
- MAT_Corps station_INF (site_id: 2363)
- MAT_LA-Tisséo (site_id: 2423)"
Compter le nombre de gateways par projet (densité d'instrumentation par projet).,"SELECT p.project_id, p.name AS project_name, COUNT(DISTINCT sg.gateway_id) AS gateway_count FROM public.projects p LEFT JOIN public.sites s ON s.project_id = p.project_id LEFT JOIN public.site_gateways sg ON sg.site_id = s.site_id GROUP BY p.project_id, p.name ORDER BY gateway_count DESC, p.project_id;","SELECT project_id, name FROM projects LIMIT 5;; SELECT site_id, gateway_id FROM site_gateways LIMIT 5;","Source: SQL Agent
Successfully counted unique gateways per project. Found that project 'M3-GC03 TISSEO' has 19 unique gateways. The query joined projects to sites and site_gateways tables to get an accurate count."
Mesurer le volume de données collectées par gateway sur les 7 derniers jours.,"SELECT rm.gateway_name, COUNT(*) AS rows_7d FROM public.raw_measurements rm WHERE rm.'timestamp'::timestamptz >= NOW() - INTERVAL '7 days' GROUP BY rm.gateway_name ORDER BY rows_7d DESC;",ERROR,"Recursion limit of 25 reached without hitting a stop condition. You can increase the limit by setting the `recursion_limit` config key.
For troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/GRAPH_RECURSION_LIMIT"
Détecter les trous de mesures supérieurs à 2h pour le Gateway-Tisséo Ligne A.,"WITH ordered AS (SELECT gateway_name, variable_id, variable_alias, 'timestamp'::timestamptz AS ts, LAG(""timestamp""::timestamptz) OVER (PARTITION BY gateway_name, variable_id ORDER BY ""timestamp""::timestamptz) AS prev_ts FROM public.raw_measurements WHERE gateway_name = 'Gateway-Tisséo Ligne A') SELECT gateway_name, variable_id, variable_alias, prev_ts, ts, ts - prev_ts AS gap FROM ordered WHERE prev_ts IS NOT NULL AND ts - prev_ts > INTERVAL '2 hours' ORDER BY gap DESC;",ERROR,"Recursion limit of 25 reached without hitting a stop condition. You can increase the limit by setting the `recursion_limit` config key.
For troubleshooting, visit: https://python.langchain.com/docs/troubleshooting/errors/GRAPH_RECURSION_LIMIT"
Calculer la moyenne journalière par alias de variable pour le Gateway-Tisséo Ligne A.,"SELECT gateway_name, variable_alias, date_trunc('day', 'timestamp'::timestamptz) AS day, AVG(value) AS avg_value FROM public.raw_measurements WHERE gateway_name = 'Gateway-Tisséo Ligne A' GROUP BY gateway_name, variable_alias, day ORDER BY day DESC, variable_alias;","SELECT gateway_name, variable_alias, timestamp, value 
FROM raw_measurements 
WHERE gateway_name = 'Tisséo Ligne A'
LIMIT 5;; SELECT DISTINCT gateway_name 
FROM raw_measurements 
WHERE gateway_name ILIKE '%tisseo%' OR gateway_name ILIKE '%ligne%'
LIMIT 5;","Source: SQL Agent
J'ai calculé et sauvegardé les moyennes journalières des mesures pour le gateway ""Gateway-Tisséo Ligne A"". Le jeu de données résultant contient les colonnes date, variable_alias, et moyenne_journaliere, triées par date puis par alias des variables. Les données ont été sauvegardées sous la référence 'gateway_tisseo_ligne_a_daily_averages'. Notons que le résultat contenait 1000 lignes, ce qui pourrait indiquer une troncature des données."
"Lister toutes les paires (unit, metric) distinctes présentes dans les mesures (types de grandeurs suivies).","SELECT DISTINCT unit, metric FROM public.raw_measurements ORDER BY unit, metric;","SELECT DISTINCT unit, metric FROM raw_measurements ORDER BY unit, metric LIMIT 5;","Source: SQL Agent
Les paires (unité, métrique) distinctes présentes dans la table raw_measurements sont :
- Température (°C)
- Angle (°)
- Niveau sonore (dB)
- Puissance (dBm)
- Accélération (m/s²)
- Déplacement (mm)
- Champ magnétique (µT)
- Mesures sans unité"
"Donner, pour chaque couple (gateway, variable_name), la valeur maximale observée.","SELECT gateway_name, variable_name, MAX(value) AS max_value FROM public.raw_measurements GROUP BY gateway_name, variable_name ORDER BY gateway_name, variable_name;","SELECT DISTINCT gateway_name, variable_name, variable_alias FROM raw_measurements LIMIT 5;","Source: SQL Agent
Les valeurs maximales par gateway et variable ont été calculées et sauvegardées sous la référence 'gateway_variable_max_values'. Le jeu de données comprend les colonnes gateway_name, variable_name et max_value pour 200 combinaisons uniques, couvrant plusieurs gateways comme Gateway-Tisséo Ligne A, MAT_INCLINO, et MAT_LA_STA1_Custom."
Identifier les gateways présents dans les mesures mais absents de la table gateways (problème de référentiel).,SELECT DISTINCT rm.gateway_name FROM public.raw_measurements rm WHERE NOT EXISTS (SELECT 1 FROM public.gateways g WHERE g.name = rm.gateway_name);,SELECT DISTINCT gateway_name FROM raw_measurements LIMIT 5;,"Source: SQL Agent
L'analyse a identifié 1 gateway présent dans raw_measurements mais absent de la table gateways :

- Gateway-Tisséo Ligne A : 389,370 mesures

Ce gateway devrait être ajouté à la table de référence gateways pour maintenir l'intégrité référentielle de la base de données."
"Lister, par parsing_id, le nombre de configs et les répertoires FTP utilisés .","SELECT parsing_id, COUNT(*) AS config_count, STRING_AGG(DISTINCT ftp_directory, '; ') AS ftp_directories FROM public.configs GROUP BY parsing_id ORDER BY parsing_id;","SELECT config_id, parsing_id, ftp_directory FROM configs LIMIT 5;; SELECT COUNT(*) as config_count FROM configs;","Source: SQL Agent
Distribution par parsing_id:
- Parsing ID 1: 13 répertoires FTP distincts incluant les chemins pour STA, SNCF_TISSEO, TOPO_Manu, Sonometres et Vibrometres
- Parsing ID 2: 1 répertoire FTP distinct pour les données INCLINO

Nombre total de configurations: 26"
Voir la hiérarchie entre sites enfants et sites principaux (ex: sous-sites rattachés à une gare).,"SELECT child.site_id, child.name AS child_site, parent.site_id AS main_site_id, parent.name AS main_site_name FROM public.sites child LEFT JOIN public.sites parent ON parent.site_id = child.main_site ORDER BY child.site_id;","SELECT * FROM sites LIMIT 5;; WITH RECURSIVE site_hierarchy AS (
  -- Base case: get parent sites (those with main_site IS NULL)
  SELECT 
    site_id,
    name as site_name,
    main_site as parent_site_id,
    0 as level,
    ARRAY[site_id] as path
  FROM sites 
  WHERE main_site IS NULL
  
  UNION ALL
  
  -- Recursive case: get child sites
  SELECT 
    s.site_id,
    s.name as site_name,
    s.main_site as parent_site_id,
    h.level + 1,
    h.path || s.site_id
  FROM sites s
  INNER JOIN site_hierarchy h ON s.main_site = h.site_id
)
SELECT 
  level,
  site_id,
  site_name,
  parent_site_id,
  type,
  deleted,
  LPAD('', level * 2, ' ') || site_name as hierarchical_name
FROM site_hierarchy
ORDER BY path, level;","Source: SQL Agent
La hiérarchie des sites montre la structure suivante:

1. Site parent:
   - MAT (site_id: 1055, pas de parent)

2. Sites enfants (tous avec parent_site_id: 1055):
   - MAT_Avoisinants (site_id: 1085)
   - MAT_Topo (site_id: 1086)
   - MAT_Sono/Vibro (site_id: 1087)
   - MAT_Corps station_CVG (site_id: 2361)
   - MAT_Corps station_EXT (site_id: 2362)
   - MAT_Corps station_INF (site_id: 2363)
   - MAT_LA-Tisséo (site_id: 2423)

La structure montre un site principal (MAT) avec 7 sites enfants, tous directement rattachés au site parent (niveau 1 dans la hiérarchie)."
"Identifier les credentials FTP (IP, user, dossier) réutilisés sur plusieurs configs.","SELECT ftp_ip, ftp_user, ftp_directory, COUNT(*) AS reuse_count FROM public.configs GROUP BY ftp_ip, ftp_user, ftp_directory HAVING COUNT(*) > 1 ORDER BY reuse_count DESC, ftp_ip;","SELECT config_id, file_name, ftp_ip, ftp_user, ftp_directory FROM configs WHERE ftp_ip IS NOT NULL LIMIT 5;","Source: SQL Agent
Les informations FTP réutilisées entre configurations sont :

1. Credentials les plus partagés :
- IP : 54.75.136.219  
- Utilisateur : CEM001FTP
- Plusieurs dossiers distincts sous /DonneesExternes/M3_GC03_TISSEO/

2. Motifs de partage notables :
- 8 configurations partagent le dossier INCLINO/MAT/
- 3 configurations partagent le dossier TOPO_Manu/MAT/STA1/DAT 
- 2 configurations partagent chacun trois autres dossiers

Les détails complets ont été sauvegardés dans le dataset 'shared_ftp_credentials'."
Identifier les gateways qui possèdent plus d'une config active.,"SELECT c.gateway_id, g.name AS gateway_name, COUNT(*) AS active_config_count FROM public.configs c LEFT JOIN public.gateways g ON g.gateway_id = c.gateway_id WHERE c.active IS TRUE GROUP BY c.gateway_id, g.name HAVING COUNT(*) > 1 ORDER BY active_config_count DESC;","SELECT g.name AS gateway_name, c.active, c.config_id 
FROM gateways g 
LEFT JOIN configs c ON g.gateway_id = c.gateway_id 
LIMIT 5;","Source: SQL Agent
Les gateways suivants ont plusieurs configurations actives :
- MAT_CVG_PM : 3 configurations actives
- MAT_INCLINO_4 : 2 configurations actives
- MAT_INCLINO : 2 configurations actives
- MAT-M_TOPO : 2 configurations actives
- MAT_INCLINO_3 : 2 configurations actives"
"Lister, pour le gateway  MAT_STA2, l'ensemble de ses configs avec dossier FTP et statut actif/inactif.","SELECT g.name AS gateway_name, c.config_id, c.file_name, c.ftp_directory, c.active FROM public.configs c JOIN public.gateways g ON g.gateway_id = c.gateway_id WHERE g.name = 'MAT_STA2' ORDER BY c.file_name;","SELECT c.config_id, c.file_name, c.gateway_id, c.active, g.name as gateway_name 
FROM configs c 
JOIN gateways g ON c.gateway_id = g.gateway_id 
LIMIT 5;","Source: SQL Agent
Configuration trouvée pour le gateway MAT_STA2 :
- ID de configuration : 5419
- Nom du fichier : Surface_MAT_STA2.dat
- Chemin FTP : /DonneesExternes/M3_GC03_TISSEO/STA/MAT/STA2/FichiersMesures/VDV/
- Statut : Actif"
Identifier les configs dont le champ last_modified est le plus ancien (top 10) pour repérer les sources figées.,"SELECT c.config_id, g.name AS gateway_name, c.file_name, c.last_modified::timestamptz AS last_modified_ts FROM public.configs c LEFT JOIN public.gateways g ON g.gateway_id = c.gateway_id ORDER BY c.last_modified::timestamptz ASC NULLS FIRST LIMIT 10;","SELECT config_id, file_name, last_modified, active FROM configs LIMIT 5;","Source: SQL Agent
Retrieved the 10 oldest configuration records ordered by last_modified timestamp ascending. The oldest configuration is from October 2023 (config_id 7258), and 8 out of 10 oldest configs are still active. Dataset saved as oldest_configs_top10."
"Pour le   Gateway-Tisséo Ligne A, récupérer la dernière mesure disponible pour chaque variable.","SELECT DISTINCT ON (rm.variable_id) rm.gateway_name, rm.variable_id, rm.variable_alias, rm.value, rm.unit, rm.""timestamp""::timestamptz AS ts FROM public.raw_measurements rm WHERE rm.gateway_name = 'Gateway-Tisséo Ligne A' ORDER BY rm.variable_id, rm.""timestamp""::timestamptz DESC;","SELECT DISTINCT gateway_name, variable_alias, value, timestamp 
FROM raw_measurements 
WHERE gateway_name = 'Gateway-Tisséo Ligne A'
LIMIT 5;","Source: SQL Agent
Retrieved the most recent measurements for Gateway-Tisséo Ligne A, showing 15 distinct variables (AccelerationX/Y/Z, MagnitudeX/Y/Z, RSSI, SNR, Temperature, TiltX/Y/Z, VarianceX/Y/Z). All variables were measured at 2025-05-20 09:54:57.000 +0200, indicating a complete and recent sensor reading set."
Compter le nombre de capteurs distincts (sensor_id) par gateway dans les mesures.,"SELECT gateway_name, COUNT(DISTINCT sensor_id) AS sensor_count FROM public.raw_measurements GROUP BY gateway_name ORDER BY sensor_count DESC;","SELECT gateway_name, sensor_id, COUNT(*) FROM raw_measurements GROUP BY gateway_name, sensor_id LIMIT 5;","Source: SQL Agent
Voici le nombre de capteurs distincts par gateway :
- Gateway-Tisséo Ligne A: 2 capteurs distincts
- MAT_INCLINO: 2 capteurs distincts  
- MAT_LA_STA1_Custom: 1 capteur distinct"
